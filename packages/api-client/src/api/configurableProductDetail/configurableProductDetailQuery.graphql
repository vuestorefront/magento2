#import "../../fragments/configurableProductOptionsFragment.graphql"

query configurableProductDetail($search: String = "", $filter: ProductAttributeFilterInput, $pageSize: Int = 20, $currentPage: Int = 1, $sort: ProductAttributeSortInput, $configurations: [ID!] ) {
  products(search: $search, filter: $filter, sort: $sort, pageSize: $pageSize, currentPage: $currentPage) {
    items {
      uid
      ...ConfigurableProductOptionsData
      ... on ConfigurableProduct {
        configurable_product_options_selection(configurableOptionValueUids: $configurations) {
          options_available_for_selection {
            attribute_code
            option_value_uids
          }
          media_gallery {
            url
            label
            position
          }
          variant {
            uid
            sku
            name
          }
        }
      }
    }
  }
}
